!function(){"use strict";var e={485:function(e,n,t){var r,o=t(526),l=t(470),i=t(672),a=t(305),c=t(403),s=t.n(c),u=t(292),d=(0,i.cn)({key:"selectedToolAtom",default:null}),v=(0,i.cn)({key:"coordsAtom",default:{x:0,y:0}}),f=(0,i.cn)({key:"canvasDimensionsAtom",default:void 0}),m=(0,i.cn)({key:"mouseIsOutAtom",default:!0}),h=(0,i.cn)({key:"isImageSelectedAtom",default:!1}),g=function(){var e=(0,i.FV)(h),n=(0,u.Z)(e,2);return{isImageSelected:n[0],setIsImageSelected:n[1]}},p={hiddenCanvasRef:null,canvasCtxRef:null,canvasRef:null,imageRef:null},_=(0,o.createContext)(p),x=function(){return{canvasRef:(0,o.useContext)(_).canvasRef}},C=function(){return{canvasCtxRef:(0,o.useContext)(_).canvasCtxRef}},j=function(){return{imageRef:(0,o.useContext)(_).imageRef}},w=function(){var e={hiddenCanvasRef:(0,o.useContext)(_).hiddenCanvasRef}.hiddenCanvasRef,n=C().canvasCtxRef,t=x().canvasRef,r=j().imageRef;return{drawCanvas:(0,o.useCallback)((function(o){var l=r.current,i=window.devicePixelRatio,a=e.current.getContext("2d",{alpha:!1,willReadFrequently:!0}),c=t.current.getContext("2d",{alpha:!1,willReadFrequently:!0}),s=l.height/o.height,u=l.width/o.width,d=1/s,v=1/u,f=Math.min(u,s,v,d);t.current.style.height="".concat(l.height*f,"px"),t.current.style.width="".concat(l.width*f,"px"),e.current.style.height="".concat(l.height*f,"px"),e.current.style.width="".concat(l.width*f,"px"),t.current.height=l.height*f*i,t.current.width=l.width*f*i,e.current.height=l.height*f,e.current.width=l.width*f,c.scale(f*i,f*i),a.scale(f,f),c.drawImage(l,0,0,l.width,l.height),a.drawImage(l,0,0,l.width,l.height),n.current=a}),[n,t,e,r])}},k=function(){var e=(0,i.FV)(f),n=(0,u.Z)(e,2),t=n[0],r=n[1],l=g().isImageSelected,a=w().drawCanvas,c=x().canvasRef;return(0,o.useEffect)((function(){var e=function(){var e=c.current.parentElement.getClientRects()[0];a(e),r(e)};return l&&window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[c,l,a,r]),(0,o.useEffect)((function(){var e=c.current.parentElement.getClientRects()[0];r(e)}),[]),{canvasDimensions:t,setCanvasDimensions:r}},R="imagePicker-module_wrapper__fvBI9",y="imagePicker-module_hidden__AVjDX",b="imagePicker-module_title__Y5W8v",P="imagePicker-module_error__pWovY",I="imagePicker-module_loading__az94v",E=t(557),O=function(){var e=(0,o.useState)(!1),n=(0,u.Z)(e,2),t=n[0],r=n[1],l=(0,o.useState)(!1),i=(0,u.Z)(l,2),c=i[0],d=i[1],v=g(),f=v.isImageSelected,m=v.setIsImageSelected,h=k().canvasDimensions,p=w().drawCanvas,_=j().imageRef,x=(0,o.useRef)(null);return(0,o.useEffect)((function(){!f&&null!==x.current&&x.current.value&&(x.current.value="")}),[f]),(0,E.jsxs)("div",{className:s()(R,(0,a.Z)({},y,f)),children:[(0,E.jsx)("input",{accept:"image/jpeg, image/png",onChange:function(e){var n;r(!0);var t=null===(n=e.target.files)||void 0===n?void 0:n[0];if(t){var o=document.createElement("img");o.onload=function(){_.current=o,p(h),m(!0),r(!1),d(!1)},o.onerror=function(){r(!1),d(!0)},o.src=URL.createObjectURL(t)}},className:y,ref:x,type:"file"}),t?(0,E.jsx)("div",{className:I}):(0,E.jsxs)(E.Fragment,{children:[c&&(0,E.jsxs)("p",{className:P,children:[(0,E.jsx)("span",{children:"Couldn't load image!"}),(0,E.jsx)("span",{children:"Please try again!"})]}),(0,E.jsx)("p",{role:"presentation",onClick:function(){var e;return null===(e=x.current)||void 0===e?void 0:e.click()},className:b,children:"Select image..."})]})]})},S=function(){var e=(0,i.FV)(d),n=(0,u.Z)(e,2),t=n[0],r=n[1];return{toggleSelectedTool:function(e){r(t!==e?e:null)},selectedTool:t}},N=(0,i.cn)({key:"selectedColorAtom",default:""}),Z=(0,i.cn)({key:"blocksCountAtom",default:15}),L=function(){var e=(0,i.FV)(N),n=(0,u.Z)(e,2);return{selectedColor:n[0],setSelectedColor:n[1]}},A=function(){var e=(0,i.FV)(Z),n=(0,u.Z)(e,2);return{blocksCount:n[0],setBlocksCount:n[1]}},F=function(e){return e[e.ColorPicker=0]="ColorPicker",e}({}),B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(e>255||n>255||t>255)&&console.error("Invalid color component"),(e<<16|n<<8|t).toString(16)};function D(){return D=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},D.apply(this,arguments)}var T,V=function(e){return o.createElement("svg",D({xmlns:"http://www.w3.org/2000/svg",width:170,height:170,fill:"none",viewBox:"0 0 160 160"},e),r||(r=o.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M80 148c37.555 0 68-30.445 68-68s-30.445-68-68-68-68 30.445-68 68 30.445 68 68 68Zm0 12c44.183 0 80-35.817 80-80S124.183 0 80 0 0 35.817 0 80s35.817 80 80 80Z",clipRule:"evenodd"})))},W="colorPickerPreview-module_previewWrapper__HIRF9",z="colorPickerPreview-module_circle__bLOm6",M="colorPickerPreview-module_blocksWrapper__lBVIw",X="colorPickerPreview-module_currentColor__HSN9m",Y=function(){var e,n,t,r,l,a,c=(0,o.useState)([]),s=(0,u.Z)(c,2),d=s[0],f=s[1],h=k().canvasDimensions,g=L().setSelectedColor,p=S().selectedTool,_=function(){var e=(0,i.FV)(v),n=(0,u.Z)(e,2);return{coords:n[0],setCoords:n[1]}}(),j=_.coords,w=_.setCoords,R=A().blocksCount,y=C().canvasCtxRef,b=function(){var e=(0,i.FV)(m),n=(0,u.Z)(e,2),t=n[0],r=n[1],l=x().canvasRef;return(0,o.useEffect)((function(){var e=null===l||void 0===l?void 0:l.current,n=function(){return r(!0)},t=function(){return r(!1)};return null===e||void 0===e||e.addEventListener("mouseleave",n),null===e||void 0===e||e.addEventListener("mouseenter",t),function(){null===e||void 0===e||e.removeEventListener("mouseleave",n),null===e||void 0===e||e.removeEventListener("mouseenter",t)}}),[l,r]),{mouseIsOut:t}}(),P=b.mouseIsOut,I=x().canvasRef,O=(0,o.useRef)(null),N=(0,o.useCallback)((function(e){var n=e.pageX-h.left,t=e.pageY-h.top;w({x:n,y:t});for(var r=y.current.getImageData(n-R,t-R,2*R+1,2*R+1).data,o=[],l=0;l<r.length;l+=4){var i=B(r[l],r[l+1],r[l+2]),a="0"===i?"black":"#"+("000000"+i).slice(-6);o.push(a)}f(o)}),[R,y,h,w]),Z=(0,o.useCallback)((function(e){var n=e.pageX-h.left,t=e.pageY-h.top;w({x:n,y:t});var r=y.current.getImageData(n,t,1,1).data,o=B(r[0],r[1],r[2]),l="0"===o?"black":"#"+("000000"+o).slice(-6);g(l)}),[y,h,w,g]),D=p===F.ColorPicker;(0,o.useEffect)((function(){var e=null===I||void 0===I?void 0:I.current;return D&&(null===e||void 0===e||e.addEventListener("mousemove",N),null===e||void 0===e||e.addEventListener("click",Z)),function(){null===e||void 0===e||e.removeEventListener("mousemove",N),null===e||void 0===e||e.removeEventListener("click",Z)}}),[I,N,Z,D]);var T=(d.length-1)/2,Y=D&&!P&&d.length?"flex":"none",H=(null!==(e=null===h||void 0===h?void 0:h.left)&&void 0!==e?e:0)+j.x+10,q=(null!==(n=null===h||void 0===h?void 0:h.top)&&void 0!==n?n:0)+j.y+10,G=null!==(t=null===(r=O.current)||void 0===r?void 0:r.clientHeight)&&void 0!==t?t:0,J=null!==(l=null===(a=O.current)||void 0===a?void 0:a.clientWidth)&&void 0!==l?l:0,Q=q+G>window.innerHeight?G+20:0;return H-=H+J>window.innerWidth?J+20:0,q-=Q,(0,E.jsxs)("div",{style:{display:Y,left:H,top:q},className:W,ref:O,children:[(0,E.jsx)(V,{className:z,color:d[T]}),(0,E.jsxs)("div",{className:M,children:[d.map((function(e,n){return(0,E.jsx)("div",{style:{border:"0.5px solid gray",borderBottomColor:n===T||n===T-(2*R+1)?"white":"gray",borderTopColor:n===T||n===T+(2*R+1)?"white":"gray",borderRightColor:n===T||n===T-1?"white":"gray",borderLeftColor:n===T||n===T+1?"white":"gray",flexBasis:"calc(100% / ".concat(2*R+1,")"),backgroundColor:e}},n)})),(0,E.jsx)("p",{className:X,children:d[T]})]})]})};function H(){return H=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},H.apply(this,arguments)}var q=function(e){return o.createElement("svg",H({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none"},e),T||(T=o.createElement("path",{fill:"currentColor",d:"M13.407 2.927c.395.396.593.88.593 1.453a1.96 1.96 0 0 1-.593 1.438l-2.016 2 1.078 1.093a.51.51 0 0 1 .156.376.53.53 0 0 1-.547.547.512.512 0 0 1-.375-.157l-1.078-1.094-5.531 5.532a.654.654 0 0 1-.235.172.796.796 0 0 1-.281.046h-1.86a.734.734 0 0 1-.515-.203.733.733 0 0 1-.203-.515v-1.86c0-.104.015-.198.047-.281a.653.653 0 0 1 .172-.235L7.75 5.708 6.657 4.63a.511.511 0 0 1-.157-.375.53.53 0 0 1 .547-.546c.146 0 .271.052.375.156l1.093 1.078 2-2.016a1.959 1.959 0 0 1 1.438-.594c.574 0 1.058.198 1.454.594Zm-8.97 10.329 5.406-5.407-1.36-1.359-5.406 5.407v1.359h1.36Z"})))},G="sidebar-module_sidebar__zxVv9",J="sidebar-module_tool__AxGnj",Q="sidebar-module_selected__y6wYp",U="sidebar-module_disabled__CIBGS",K=function(){var e,n=S(),t=n.toggleSelectedTool,r=n.selectedTool,o=g().isImageSelected;return(0,E.jsx)("div",{className:G,children:(0,E.jsx)("div",{className:s()(J,(e={},(0,a.Z)(e,Q,r===F.ColorPicker),(0,a.Z)(e,U,!o),e)),onClick:o?function(){return t(F.ColorPicker)}:void 0,title:"Color Picker",children:(0,E.jsx)(q,{})})})},$="header-module_header__RfgIn",ee="header-module_title__h0rnJ",ne=function(){return(0,E.jsx)("div",{className:$,children:(0,E.jsx)("p",{className:ee,children:"Photo Editor"})})},te="editor-module_editor__OJira",re="editor-module_body__IQlzl",oe="editor-module_content__iecjR",le="editor-module_info__hOy0Q",ie="editor-module_selectedColor__RwADC",ae="editor-module_pickerDiameter__uKlf7",ce="editor-module_select__ye_CL",se="editor-module_cross__BCC_o",ue="editor-module_image__R5gvA",de="editor-module_canvas__AvWtd",ve="editor-module_picker__C6fXS",fe=document.createElement("canvas"),me=function(){var e=(0,o.useRef)(null),n=(0,o.useRef)(null),t=(0,o.useRef)(null),r=(0,o.useRef)(fe),l=g(),i=l.isImageSelected,c=l.setIsImageSelected,u=S(),d=u.selectedTool,v=u.toggleSelectedTool,f=L(),m=f.selectedColor,h=f.setSelectedColor,p=A(),x=p.blocksCount,C=p.setBlocksCount,j=s()(de,(0,a.Z)({},ve,d===F.ColorPicker));return(0,E.jsx)(_.Provider,{value:{hiddenCanvasRef:r,canvasCtxRef:e,canvasRef:n,imageRef:t},children:(0,E.jsxs)("div",{className:te,children:[(0,E.jsx)(ne,{}),(0,E.jsxs)("div",{className:re,children:[(0,E.jsx)(K,{}),(0,E.jsxs)("div",{className:oe,children:[(0,E.jsxs)("div",{className:le,children:[m&&(0,E.jsxs)("p",{className:ie,style:{borderColor:m},children:["Selected color - ",(0,E.jsx)("span",{children:m})]}),d===F.ColorPicker&&(0,E.jsxs)("div",{className:ae,children:[(0,E.jsx)("p",{children:"Picker diameter -\xa0"}),(0,E.jsxs)("select",{className:ce,onChange:function(e){var n=e.currentTarget.value;return C(+n)},value:x,children:[(0,E.jsx)("option",{value:2,children:"5"}),(0,E.jsx)("option",{value:5,children:"11"}),(0,E.jsx)("option",{value:10,children:"21"}),(0,E.jsx)("option",{value:15,children:"31"})]})]}),i&&(0,E.jsx)("span",{onClick:function(){c(!1),h(""),v(null)},className:se,children:"X"})]}),(0,E.jsxs)("div",{className:ue,children:[(0,E.jsx)("canvas",{className:j,ref:n}),(0,E.jsx)(O,{})]})]})]}),(0,E.jsx)(Y,{})]})})},he=function(){return(0,E.jsx)(i.Wh,{children:(0,E.jsx)(me,{})})};l.createRoot(document.getElementById("root")).render((0,E.jsx)(o.StrictMode,{children:(0,E.jsx)(he,{})}))}},n={};function t(r){var o=n[r];if(void 0!==o)return o.exports;var l=n[r]={exports:{}};return e[r](l,l.exports,t),l.exports}t.m=e,function(){var e=[];t.O=function(n,r,o,l){if(!r){var i=1/0;for(u=0;u<e.length;u++){r=e[u][0],o=e[u][1],l=e[u][2];for(var a=!0,c=0;c<r.length;c++)(!1&l||i>=l)&&Object.keys(t.O).every((function(e){return t.O[e](r[c])}))?r.splice(c--,1):(a=!1,l<i&&(i=l));if(a){e.splice(u--,1);var s=o();void 0!==s&&(n=s)}}return n}l=l||0;for(var u=e.length;u>0&&e[u-1][2]>l;u--)e[u]=e[u-1];e[u]=[r,o,l]}}(),t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,{a:n}),n},t.d=function(e,n){for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},function(){var e={179:0};t.O.j=function(n){return 0===e[n]};var n=function(n,r){var o,l,i=r[0],a=r[1],c=r[2],s=0;if(i.some((function(n){return 0!==e[n]}))){for(o in a)t.o(a,o)&&(t.m[o]=a[o]);if(c)var u=c(t)}for(n&&n(r);s<i.length;s++)l=i[s],t.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return t.O(u)},r=self.webpackChunkphoto_editor=self.webpackChunkphoto_editor||[];r.forEach(n.bind(null,0)),r.push=n.bind(null,r.push.bind(r))}();var r=t.O(void 0,[216],(function(){return t(485)}));r=t.O(r)}();
//# sourceMappingURL=main.15d7cf2e.js.map