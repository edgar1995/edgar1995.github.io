!function(){"use strict";var e={485:function(e,n,r){var t,o=r(526),i=r(470),l=r(672),c=r(305),a=r(292),u=r(403),s=r.n(u),d=(0,l.cn)({key:"selectedToolAtom",default:null}),v=(0,l.cn)({key:"coordsAtom",default:{x:0,y:0}}),f=(0,l.cn)({key:"canvasDimensionsAtom",default:void 0}),h=(0,l.cn)({key:"mouseIsOutAtom",default:!0}),m=(0,l.cn)({key:"isImageSelectedAtom",default:!1}),g=function(){return(0,l.FV)(m)},_={hiddenCanvasRef:null,canvasCtxRef:null,canvasRef:null,imageRef:null},p=(0,o.createContext)(_),x=function(){return(0,o.useContext)(p).canvasRef},w=function(){return(0,o.useContext)(p).canvasCtxRef},C=function(){return(0,o.useContext)(p).imageRef},j=function(){var e=(0,o.useContext)(p).hiddenCanvasRef,n=w(),r=x(),t=C();return{drawCanvas:(0,o.useCallback)((function(o){var i=t.current,l=window.devicePixelRatio,c=e.current.getContext("2d",{alpha:!1,willReadFrequently:!0}),a=r.current.getContext("2d",{alpha:!1,willReadFrequently:!0}),u=i.height/o.height,s=i.width/o.width,d=1/u,v=1/s,f=Math.min(s,u,v,d);r.current.style.height="".concat(i.height*f,"px"),r.current.style.width="".concat(i.width*f,"px"),e.current.style.height="".concat(i.height*f,"px"),e.current.style.width="".concat(i.width*f,"px"),r.current.height=i.height*f*l,r.current.width=i.width*f*l,e.current.height=i.height*f,e.current.width=i.width*f,a.scale(f*l,f*l),c.scale(f,f),a.drawImage(i,0,0,i.width,i.height),c.drawImage(i,0,0,i.width,i.height),n.current=c}),[n,r,e,t])}},k=function(){var e=(0,l.FV)(f),n=(0,a.Z)(e,2),r=n[0],t=n[1],i=g(),c=(0,a.Z)(i,1)[0],u=j().drawCanvas,s=x();return(0,o.useEffect)((function(){var e=function(){var e=s.current.parentElement.getClientRects()[0];u(e),t(e)};return c&&window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[s,c,u,t]),(0,o.useEffect)((function(){var e=s.current.parentElement.getClientRects()[0];t(e)}),[]),{canvasDimensions:r,setCanvasDimensions:t}},y="imagePicker-module_wrapper__fvBI9",b="imagePicker-module_hidden__AVjDX",R="imagePicker-module_title__Y5W8v",P=r(557),E=function(){var e=g(),n=(0,a.Z)(e,2),r=n[0],t=n[1],i=k().canvasDimensions,l=j().drawCanvas,u=C(),d=(0,o.useRef)(null);return(0,o.useEffect)((function(){!r&&null!==d.current&&d.current.value&&(d.current.value="")}),[r]),(0,P.jsxs)("div",{className:s()(y,(0,c.Z)({},b,r)),children:[(0,P.jsx)("input",{accept:"image/jpeg, image/png",onChange:function(e){var n,r=null===(n=e.target.files)||void 0===n?void 0:n[0];if(r){var o=document.createElement("img");o.onload=function(){u.current=o,l(i),t(!0)},o.src=URL.createObjectURL(r)}},className:b,ref:d,type:"file"}),(0,P.jsx)("p",{role:"presentation",onClick:function(){var e;return null===(e=d.current)||void 0===e?void 0:e.click()},className:R,children:"Select image..."})]})},O=function(){var e=(0,l.FV)(d),n=(0,a.Z)(e,2),r=n[0],t=n[1];return{toggleSelectedTool:function(e){t(r!==e?e:null)},selectedTool:r}},N=(0,l.cn)({key:"selectedColorAtom",default:""}),Z=(0,l.cn)({key:"blocksCountAtom",default:15}),L=function(){return(0,l.FV)(N)},I=function(){return(0,l.FV)(Z)},S=function(e){return e[e.ColorPicker=0]="ColorPicker",e}({}),A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(e>255||n>255||r>255)&&console.error("Invalid color component"),(e<<16|n<<8|r).toString(16)};function D(){return D=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},D.apply(this,arguments)}var F,T=function(e){return o.createElement("svg",D({xmlns:"http://www.w3.org/2000/svg",width:170,height:170,fill:"none",viewBox:"0 0 160 160"},e),t||(t=o.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M80 148c37.555 0 68-30.445 68-68s-30.445-68-68-68-68 30.445-68 68 30.445 68 68 68Zm0 12c44.183 0 80-35.817 80-80S124.183 0 80 0 0 35.817 0 80s35.817 80 80 80Z",clipRule:"evenodd"})))},V="colorPickerPreview-module_previewWrapper__HIRF9",B="colorPickerPreview-module_circle__bLOm6",W="colorPickerPreview-module_blocksWrapper__lBVIw",M="colorPickerPreview-module_currentColor__HSN9m",X=function(){var e,n,r,t,i,c,u=(0,o.useState)([]),s=(0,a.Z)(u,2),d=s[0],f=s[1],m=k().canvasDimensions,g=L(),_=(0,a.Z)(g,2)[1],p=O().selectedTool,C=(0,l.FV)(v),j=(0,a.Z)(C,2),y=j[0],b=j[1],R=I(),E=(0,a.Z)(R,1)[0],N=w(),Z=function(){var e=(0,l.FV)(h),n=(0,a.Z)(e,2),r=n[0],t=n[1],i=x();return(0,o.useEffect)((function(){var e=null===i||void 0===i?void 0:i.current,n=function(){return t(!0)},r=function(){return t(!1)};return null===e||void 0===e||e.addEventListener("mouseleave",n),null===e||void 0===e||e.addEventListener("mouseenter",r),function(){null===e||void 0===e||e.removeEventListener("mouseleave",n),null===e||void 0===e||e.removeEventListener("mouseenter",r)}}),[i,t]),r}(),D=x(),F=(0,o.useRef)(null),X=(0,o.useCallback)((function(e){var n=e.pageX-m.left,r=e.pageY-m.top;b({x:n,y:r});for(var t=N.current.getImageData(n-E,r-E,2*E+1,2*E+1).data,o=[],i=0;i<t.length;i+=4){var l=A(t[i],t[i+1],t[i+2]),c="0"===l?"black":"#"+("000000"+l).slice(-6);o.push(c)}f(o)}),[E,N,m,b]),z=(0,o.useCallback)((function(e){var n=e.pageX-m.left,r=e.pageY-m.top;b({x:n,y:r});var t=N.current.getImageData(n,r,1,1).data,o=A(t[0],t[1],t[2]),i="0"===o?"black":"#"+("000000"+o).slice(-6);_(i)}),[N,m,b,_]),H=p===S.ColorPicker;(0,o.useEffect)((function(){var e=null===D||void 0===D?void 0:D.current;return H&&(null===e||void 0===e||e.addEventListener("mousemove",X),null===e||void 0===e||e.addEventListener("click",z)),function(){null===e||void 0===e||e.removeEventListener("mousemove",X),null===e||void 0===e||e.removeEventListener("click",z)}}),[D,X,z,H]);var Y=(d.length-1)/2,q=H&&!Z&&d.length?"flex":"none",G=(null!==(e=null===m||void 0===m?void 0:m.left)&&void 0!==e?e:0)+y.x+10,J=(null!==(n=null===m||void 0===m?void 0:m.top)&&void 0!==n?n:0)+y.y+10,Q=null!==(r=null===(t=F.current)||void 0===t?void 0:t.clientHeight)&&void 0!==r?r:0,U=null!==(i=null===(c=F.current)||void 0===c?void 0:c.clientWidth)&&void 0!==i?i:0,K=J+Q>window.innerHeight?Q+20:0;return G-=G+U>window.innerWidth?U+20:0,J-=K,(0,P.jsxs)("div",{style:{display:q,left:G,top:J},className:V,ref:F,children:[(0,P.jsx)(T,{className:B,color:d[Y]}),(0,P.jsxs)("div",{className:W,children:[d.map((function(e,n){return(0,P.jsx)("div",{style:{border:"0.5px solid gray",borderBottomColor:n===Y||n===Y-(2*E+1)?"white":"gray",borderTopColor:n===Y||n===Y+(2*E+1)?"white":"gray",borderRightColor:n===Y||n===Y-1?"white":"gray",borderLeftColor:n===Y||n===Y+1?"white":"gray",flexBasis:"calc(100% / ".concat(2*E+1,")"),backgroundColor:e}},n)})),(0,P.jsx)("p",{className:M,children:d[Y]})]})]})};function z(){return z=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},z.apply(this,arguments)}var H=function(e){return o.createElement("svg",z({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none"},e),F||(F=o.createElement("path",{fill:"currentColor",d:"M13.407 2.927c.395.396.593.88.593 1.453a1.96 1.96 0 0 1-.593 1.438l-2.016 2 1.078 1.093a.51.51 0 0 1 .156.376.53.53 0 0 1-.547.547.512.512 0 0 1-.375-.157l-1.078-1.094-5.531 5.532a.654.654 0 0 1-.235.172.796.796 0 0 1-.281.046h-1.86a.734.734 0 0 1-.515-.203.733.733 0 0 1-.203-.515v-1.86c0-.104.015-.198.047-.281a.653.653 0 0 1 .172-.235L7.75 5.708 6.657 4.63a.511.511 0 0 1-.157-.375.53.53 0 0 1 .547-.546c.146 0 .271.052.375.156l1.093 1.078 2-2.016a1.959 1.959 0 0 1 1.438-.594c.574 0 1.058.198 1.454.594Zm-8.97 10.329 5.406-5.407-1.36-1.359-5.406 5.407v1.359h1.36Z"})))},Y="sidebar-module_sidebar__zxVv9",q="sidebar-module_tool__AxGnj",G="sidebar-module_selected__y6wYp",J="sidebar-module_disabled__CIBGS",Q=function(){var e,n=O(),r=n.toggleSelectedTool,t=n.selectedTool,o=g(),i=(0,a.Z)(o,1)[0];return(0,P.jsx)("div",{className:Y,children:(0,P.jsx)("div",{className:s()(q,(e={},(0,c.Z)(e,G,t===S.ColorPicker),(0,c.Z)(e,J,!i),e)),onClick:i?function(){return r(S.ColorPicker)}:void 0,title:"Color Picker",children:(0,P.jsx)(H,{})})})},U="header-module_header__RfgIn",K="header-module_title__h0rnJ",$=function(){return(0,P.jsx)("div",{className:U,children:(0,P.jsx)("p",{className:K,children:"Photo Editor"})})},ee="editor-module_editor__OJira",ne="editor-module_body__IQlzl",re="editor-module_content__iecjR",te="editor-module_info__hOy0Q",oe="editor-module_selectedColor__RwADC",ie="editor-module_pickerDiameter__uKlf7",le="editor-module_select__ye_CL",ce="editor-module_cross__BCC_o",ae="editor-module_image__R5gvA",ue="editor-module_canvas__AvWtd",se="editor-module_hiddenCanvas__tOZR_",de="editor-module_picker__C6fXS",ve=function(){var e=(0,o.useRef)(null),n=(0,o.useRef)(null),r=(0,o.useRef)(null),t=(0,o.useRef)(null),i=g(),l=(0,a.Z)(i,2),u=l[0],d=l[1],v=O(),f=v.selectedTool,h=v.toggleSelectedTool,m=L(),_=(0,a.Z)(m,2),x=_[0],w=_[1],C=I(),j=(0,a.Z)(C,2),k=j[0],y=j[1],b=s()(ue,(0,c.Z)({},de,f===S.ColorPicker));return(0,P.jsx)(p.Provider,{value:{hiddenCanvasRef:n,canvasCtxRef:e,canvasRef:r,imageRef:t},children:(0,P.jsxs)("div",{className:ee,children:[(0,P.jsx)($,{}),(0,P.jsxs)("div",{className:ne,children:[(0,P.jsx)(Q,{}),(0,P.jsxs)("div",{className:re,children:[(0,P.jsxs)("div",{className:te,children:[x&&(0,P.jsxs)("p",{className:oe,style:{borderColor:x},children:["Selected color - ",(0,P.jsx)("span",{children:x})]}),f===S.ColorPicker&&(0,P.jsxs)("div",{className:ie,children:[(0,P.jsx)("p",{children:"Picker diameter -\xa0"}),(0,P.jsxs)("select",{className:le,onChange:function(e){var n=e.currentTarget.value;return y(+n)},value:k,children:[(0,P.jsx)("option",{value:2,children:"5"}),(0,P.jsx)("option",{value:5,children:"11"}),(0,P.jsx)("option",{value:10,children:"21"}),(0,P.jsx)("option",{value:15,children:"31"})]})]}),u&&(0,P.jsx)("span",{onClick:function(){d(!1),w(""),h(null)},className:ce,children:"X"})]}),(0,P.jsxs)("div",{className:ae,children:[(0,P.jsx)("canvas",{className:s()(b,se),ref:n}),(0,P.jsx)("canvas",{className:b,ref:r}),(0,P.jsx)(E,{})]})]})]}),(0,P.jsx)(X,{})]})})},fe=function(){return(0,P.jsx)(l.Wh,{children:(0,P.jsx)(ve,{})})};i.createRoot(document.getElementById("root")).render((0,P.jsx)(o.StrictMode,{children:(0,P.jsx)(fe,{})}))}},n={};function r(t){var o=n[t];if(void 0!==o)return o.exports;var i=n[t]={exports:{}};return e[t](i,i.exports,r),i.exports}r.m=e,function(){var e=[];r.O=function(n,t,o,i){if(!t){var l=1/0;for(s=0;s<e.length;s++){t=e[s][0],o=e[s][1],i=e[s][2];for(var c=!0,a=0;a<t.length;a++)(!1&i||l>=i)&&Object.keys(r.O).every((function(e){return r.O[e](t[a])}))?t.splice(a--,1):(c=!1,i<l&&(l=i));if(c){e.splice(s--,1);var u=o();void 0!==u&&(n=u)}}return n}i=i||0;for(var s=e.length;s>0&&e[s-1][2]>i;s--)e[s]=e[s-1];e[s]=[t,o,i]}}(),r.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(n,{a:n}),n},r.d=function(e,n){for(var t in n)r.o(n,t)&&!r.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},r.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},function(){var e={179:0};r.O.j=function(n){return 0===e[n]};var n=function(n,t){var o,i,l=t[0],c=t[1],a=t[2],u=0;if(l.some((function(n){return 0!==e[n]}))){for(o in c)r.o(c,o)&&(r.m[o]=c[o]);if(a)var s=a(r)}for(n&&n(t);u<l.length;u++)i=l[u],r.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return r.O(s)},t=self.webpackChunkphoto_editor=self.webpackChunkphoto_editor||[];t.forEach(n.bind(null,0)),t.push=n.bind(null,t.push.bind(t))}();var t=r.O(void 0,[216],(function(){return r(485)}));t=r.O(t)}();
//# sourceMappingURL=main.c8b2dc72.js.map